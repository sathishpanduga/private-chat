{% extends "private_chat/base.html" %}
{% block content %}
    <ul id="messages">
    </ul>
    <input type="text" id="m">
{% endblock %}
{% block scripts %}
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script>
        var socket = new WebSocket("ws://localhost:8888/websocket");
        socket.onmessage = function (e) {
            console.log("got: "+ e.data);
            $("#messages").append($("<li>").text(e.data));
        };
        $("#m").keyup(function (event){
            if (event.keyCode === 13) {
                var message = $("#m").val();
                console.log("sending: " + message);
                socket.send(message);
                $("#m").val("");
                $("#m").focus();
            }
        });
    </script>
{% endblock %}